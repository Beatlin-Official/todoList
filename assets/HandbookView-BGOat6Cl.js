import{r as u,P as F,c as h,o as H,a as i,b as t,w as c,v as R,F as I,d as L,e as U,f as s,g as B,T as A,h as b,u as d,i as v,t as D,R as G,I as p,n as J}from"./index-BzDyvK5M.js";const K={class:"mr-auto flex items-center mb-5"},O={class:"grid grid-cols-4 grid-rows-5 gap-2 min-h-80"},Q={class:"max-h-12 mx-auto mb-auto"},W=["src","alt"],X={class:"text-center pt-2"},Y={key:0},Z={class:"loadingBox"},ee={id:"pageBox",class:"flex mx-auto mt-10 w-full justify-center items-center"},te={class:"max-w-24 w-full flex justify-center"},oe={id:"pageList",class:"min-w-56 flex justify-center"},ae=["onClick"],re={class:"max-w-24 w-full flex justify-center"},_=20,le={__name:"HandbookView",setup(ne){const k=u(!0),w=new F,$={offset:0,limit:1e3},g=u(null),f=u([]),y=u({}),P=u([]),a=u(1),C=h(()=>M()),M=()=>{if(g.value==""||g.value==null)return f.value;let r=g.value.toLowerCase();return a.value=1,f.value.filter(e=>e.name.includes(r))},N=h(()=>{const r={};return P.value.forEach(e=>{r[e.name]=e.sprites.other.showdown.front_default}),r}),j=h(()=>{const r=(a.value-1)*_,e=r+_;return C.value.slice(r,e)}),n=h(()=>Math.ceil(C.value.length/_)),S=h(()=>{const r=[],e=Math.max(1,a.value-2),o=Math.min(n.value,a.value+2);for(let m=e;m<=o;m++)r.push(m);return r}),V=r=>{a.value=r},q=()=>{a.value>1&&a.value--},T=()=>{a.value<n.value&&a.value++};return H(()=>{const r=e=>new Promise((o,m)=>{if(e===1&&w.getPokemonsList($).then(function(x){f.value=x.results,y.value=x.results.reduce((l,z,E)=>l={...l,[z.name]:E+1},{}),o(`step ${e} success`)}),e===2){const x=f.value.map(l=>y.value[l.name]);w.getPokemonByName(x).then(l=>{P.value=l,k.value=!1,console.log(`step ${e} success`)})}});r(1).then(e=>(console.log(e),r(2))).catch(e=>{console.log(e)})}),(r,e)=>(v(),i("main",null,[e[5]||(e[5]=t("h1",{class:"text-3xl font-medium pb-2 mb-5 border-b border-gray-700"}," Handbook ",-1)),t("div",K,[c(t("input",{type:"text",placeholder:"Search Pokemon","onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),class:"block mr-2 px-2 py-1 rounded text-gray-900"},null,512),[[R,g.value]])]),t("div",null,[t("div",O,[(v(!0),i(I,null,L(j.value,o=>(v(),i("div",{class:"border border-gray-500 rounded hover:bg-green-800 hover:border-green-500 transition-all",key:o.idx},[s(d(G),{class:"flex flex-col h-full justify-center items-center p-3",to:{name:"Pokemon",params:{slug:`${y.value[o.name]}`}}},{default:B(()=>[t("div",Q,[t("img",{class:"object-contain max-h-12 mx-auto",src:N.value[o.name],alt:o.name},null,8,W)]),t("div",X,D(o.name),1)]),_:2},1032,["to"])]))),128)),j.value.length==0?(v(),i("div",Y,e[3]||(e[3]=[t("p",null,"Please Search again",-1)]))):U("",!0)])]),s(A,{name:"loading"},{default:B(()=>[c(t("div",Z,[e[4]||(e[4]=t("p",null,"Loading",-1)),s(d(p),{icon:"tabler:loader"})],512),[[b,k.value]])]),_:1}),t("div",ee,[t("div",te,[c(t("button",{onClick:e[1]||(e[1]=o=>a.value=1),class:"mx-1 p-2 rounded cursor-pointer border border-gray-600 opacity-45 transition-all duration-600 hover:bg-gray-700 hover:border-gray-700 hover:opacity-100"},[s(d(p),{icon:"tabler:square-chevrons-left"})],512),[[b,a.value!==1]]),c(t("button",{onClick:q,class:"mx-1 p-2 rounded cursor-pointer border border-gray-600 opacity-45 transition-all duration-600 hover:bg-gray-700 hover:border-gray-700 hover:opacity-100"},[s(d(p),{icon:"tabler:square-chevron-left"})],512),[[b,a.value!==1]])]),t("div",oe,[(v(!0),i(I,null,L(S.value,o=>(v(),i("button",{id:"pageItem",key:o,onClick:m=>V(o),class:J([{"bg-gray-700":o===a.value},"min-w-8 mx-1 p-2 rounded cursor-pointer border border-gray-600 transition-all duration-600 hover:bg-gray-700 hover:border-gray-700 text-xs font-extralight"])},D(o),11,ae))),128))]),t("div",re,[c(t("button",{onClick:T,class:"mx-1 p-2 rounded cursor-pointer border border-gray-600 opacity-45 transition-all duration-600 hover:bg-gray-700 hover:border-gray-700 hover:opacity-100"},[s(d(p),{icon:"tabler:square-chevron-right"})],512),[[b,a.value!==n.value&&n.value!==0]]),c(t("button",{onClick:e[2]||(e[2]=o=>a.value=n.value),class:"mx-1 p-2 rounded cursor-pointer border border-gray-600 transition-all duration-600 hover:bg-gray-700 opacity-45 hover:border-gray-700 hover:opacity-100"},[s(d(p),{icon:"tabler:square-chevrons-right"})],512),[[b,a.value!==n.value&&n.value!==0]])])])]))}};export{le as default};
